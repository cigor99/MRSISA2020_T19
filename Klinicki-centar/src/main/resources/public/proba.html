<html>

<head>
    <title>Dnevni pregled radnog kalendara</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <!-- <script src="js/main.js"></script>
    <link href="style.css" rel="stylesheet">
    <script>
        $(document).ready(function() {
            ucitajZaglavlje();
        });
    </script> -->
</head>

<body>
    <style>
        body {
            background: #b3e6b3;
        }
        
        th {
            text-align: center;
            background-color: lightgreen;
            color: black;
            font-weight: 600;
        }
        
        td {
            text-align: center;
            font-size: 15px;
            height: 40px;
            min-width: 50px;
        }
        
        #rez {
            width: 95%;
            margin: auto;
        }
        
        .naslov {
            width: 100%;
            /*background: #ed5e5e;*/
            padding-left: 10px;
            text-align: center;
            color: black;
            /*color: #ed5e5e;*/
        }
    </style>
    <div class="naslov">
        <H1>Dnevni pregled radnog kalendara</H1>
    </div>
    <div>
        <table id="rez" border="1">
            <thead>
                <tr>
                    <th>Datum</th>
                    <th>Vreme</th>
                    <th>Trajanje</th>
                    <th>Pacijent</th>
                    <th>Tip pregleda</th>
                    <th>Započni pregled</th>
                </tr>
            </thead>
        </table>
    </div>
    <script>
        $(document).ready(function() {
            var imeCoded = window.location.href.split("?")[1];
            var imeJednako = imeCoded.split("&")[0];
            var mesecJednako = imeCoded.split("&")[1];
            var dan = imeJednako.split("=")[1];
            var mesec = mesecJednako.split("=")[1];

            $.ajax({
                url: "/klinicki-centar/pregled/getDnevniPregled/" + dan + "/" + mesec,
                type: 'get',
                success: function(data) {
                    let table = $("#rez")
                    for (let pregled of data) {
                        let tr = $("<tr></tr>");
                        let datumTD = $("<td></td>");
                        datumTD.append(pregled.datum);
                        let vremeTD = $("<td></td>");
                        vremeTD.append(pregled.vreme);
                        let TrajanjeTD = $("<td></td>");
                        TrajanjeTD.append(pregled.trajanje + " min");
                        let pregledTD = $("<td></td>");
                        let a = $("<a>Započni pregled</a>");
                        a.attr("href", 'izvestajPregleda.html?pID=' + pregled.pacijentID + "&prID=" + pregled.id);
                        pregledTD.append(a);

                        tr.append(datumTD);
                        tr.append(vremeTD);
                        tr.append(TrajanjeTD);

                        // table.append(tr);

                        let imeTD = $("<td></td>");
                        imeTD.append(pregled.pacijent);

                        let tipPregledaTd = $("<td></td>");
                        tipPregledaTd.append(pregled.tipPregleda);

                        tr.append(imeTD);
                        tr.append(tipPregledaTd);
                        tr.append(pregledTD);
                        table.append(tr);

                    }
                    // alert(data);
                },
                error: function(jqXHR) {
                    alert("Error: " + jqXHR.status + " " + jqXHR.responseText);
                },
            })
        });
    </script>


</body>

</html>